<!doctype html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="theme-color" content="#4188c9">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="robots" content="index,follow">
    <link rel="apple-touch-icon" sizes="180x180" href="https://www.kimai.org/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://www.kimai.org/images/icon_32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://www.kimai.org/images/icon_16x16.png">
    <title>Azure SAML – Kimai</title>
    <meta name="description" content="How to use Azure AD SAML identity provider with Kimai">
    <meta property="og:description" content="How to use Azure AD SAML identity provider with Kimai">
    <meta name="twitter:description" content="How to use Azure AD SAML identity provider with Kimai">
    <link type="application/atom+xml" rel="alternate" href="https://www.kimai.org/feed.xml" title="Kimai Time-Tracking" />
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Kimai Time-Tracking">
    <meta property="og:image" content="https://www.kimai.org/images/social-preview.webp">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Kimai Time-Tracking">
    <meta name="twitter:site" content="@kimai_org">
    <meta name="twitter:image" content="https://www.kimai.org/images/social-preview.webp">
    <link rel="canonical" href="https://www.kimai.org/documentation/saml-azure.html" />
    <link href="/assets/build/main.css?v6" rel="stylesheet" />
</head>
<body class="">











<header class="header navbar navbar-expand bg-light border-bottom border-light shadow fixed-top" data-scroll-header>
    <div class="container-fluid pe-lg-4">
        <div class="d-flex align-items-center">
            <a href="/" class="navbar-brand flex-shrink-0 py-1 py-lg-2">
                <img src="/images/apple-touch-icon.png" width="32" alt="Kimai logo" class="me-2">
                Kimai Docs
            </a>
            <span class="badge bg-warning">On-Premise</span>
        </div>
        <div class="d-flex align-items-center w-100">
            <ul class="navbar-nav d-none d-lg-flex" style="padding-left: 6.75rem;">
                
                    
                    
                    <li class="nav-item">
                        <a href="/documentation/chapter-manual.html" class="nav-link ">
                            <i class="bx bx-book opacity-70 fs-lg me-1"></i>
                            User manual
                        </a>
                    </li>
                
                    
                    
                    <li class="nav-item">
                        <a href="/documentation/cloud.html" class="nav-link ">
                            <i class="bx bx-cloud opacity-70 fs-lg me-1"></i>
                            Kimai-Cloud
                        </a>
                    </li>
                
                    
                    
                    <li class="nav-item">
                        <a href="/documentation/chapter-on-premise.html" class="nav-link  active">
                            <i class="bx bx-server opacity-70 fs-lg me-1"></i>
                            On-Premise
                        </a>
                    </li>
                
                    
                    
                    <li class="nav-item">
                        <a href="/documentation/chapter-developer.html" class="nav-link ">
                            <i class="bx bx-code-alt opacity-70 fs-lg me-1"></i>
                            Developer
                        </a>
                    </li>
                
            </ul>
            <button type="button" class="navbar-toggler d-block d-lg-none ms-auto me-4" data-bs-toggle="offcanvas" data-bs-target="#componentsNav" aria-controls="componentsNav" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </div>
</header>

<aside class="bg-dark">
    <div id="componentsNav" class="offcanvas-lg offcanvas-start d-flex flex-column position-fixed top-0 start-0 vh-100 bg-dark border-end-lg" style="width: 19rem; z-index: 1045;">
        <div class="offcanvas-header d-none d-lg-flex justify-content-start">
            <a href="/" class="navbar-brand d-none d-lg-flex py-0">
                <img src="/images/apple-touch-icon.png" width="26" alt="Kimai logo" class="me-3">
                Kimai Docs
            </a>
        </div>
        <div class="offcanvas-header d-block d-lg-none border-bottom">
            <div class="d-flex align-items-center justify-content-between mb-3">
                <h5 class="d-lg-none mb-0">Menu</h5>
                <button type="button" class="btn-close d-lg-none" data-bs-dismiss="offcanvas" data-bs-target="#componentsNav" aria-label="Close"></button>
            </div>
            <div class="list-group list-group-flush mx-n4">
                
                    
                    
                    <a href="/documentation/chapter-manual.html" class="list-group-item list-group-item-action d-flex align-items-center border-0 py-1 px-4">
                        <i class="bx bx-book opacity-70 me-1"></i>
                        User manual
                    </a>
                
                    
                    
                    <a href="/documentation/cloud.html" class="list-group-item list-group-item-action d-flex align-items-center border-0 py-1 px-4">
                        <i class="bx bx-cloud opacity-70 me-1"></i>
                        Kimai-Cloud
                    </a>
                
                    
                    
                    <a href="/documentation/chapter-on-premise.html" class="list-group-item list-group-item-action d-flex align-items-center border-0 py-1 px-4">
                        <i class="bx bx-server opacity-70 me-1"></i>
                        On-Premise
                    </a>
                
                    
                    
                    <a href="/documentation/chapter-developer.html" class="list-group-item list-group-item-action d-flex align-items-center border-0 py-1 px-4">
                        <i class="bx bx-code-alt opacity-70 me-1"></i>
                        Developer
                    </a>
                
            </div>
        </div>
        <div class="offcanvas-body overflow-scroll w-100 p-4">
            <div class="h-auto docsnavi">
                
                    
                    
                    
                    
                    <p class="fs-lg mb-1 text-white fw-bold">Cloud setups</p>
                    <div class="list-group list-group-flush mb-4 me-n4 border-start">
                        
                        
                        
                        
                        <a href="/documentation/hosting-hetzner-cloud.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-hosting-hetzner-cloud">
                            
                            Hetzner Cloud
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/hosting-digital-ocean.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-hosting-digital-ocean">
                            
                            DigitalOcean
                            
                        </a>
                        
                        
                    </div>
                    
                    
                    
                    <p class="fs-lg mb-1 text-white fw-bold">Using Docker</p>
                    <div class="list-group list-group-flush mb-4 me-n4 border-start">
                        
                        
                        
                        
                        <a href="/documentation/docker.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-docker">
                            
                            Docker
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/docker-compose.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-docker-compose">
                            
                            Docker Compose
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/kubernetes.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-kubernetes">
                            
                            Kubernetes
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/building-docker.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-building-docker">
                            
                            Build your image
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/docker-troubleshooting.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-docker-troubleshooting">
                            
                            Troubleshooting
                            
                        </a>
                        
                        
                    </div>
                    
                    
                    
                    <p class="fs-lg mb-1 text-white fw-bold">Setup with SSH</p>
                    <div class="list-group list-group-flush mb-4 me-n4 border-start">
                        
                        
                        
                        
                        <a href="/documentation/installation.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-installation">
                            
                            Installation
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/updates.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-updates">
                            
                            Updates
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/cache.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-cache">
                            
                            Reloading cache
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/plugin-management.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-plugin-management">
                            
                            Plugins
                            
                        </a>
                        
                        
                    </div>
                    
                    
                    
                    <p class="fs-lg mb-1 text-white fw-bold">Other setups</p>
                    <div class="list-group list-group-flush mb-4 me-n4 border-start">
                        
                        
                        
                        
                        <a href="/documentation/fresh-ubuntu-22.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-fresh-ubuntu-22">
                            
                            Ubuntu 22.04
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/webserver-configuration.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-webserver-configuration">
                            
                            Webserver
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/synology.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-synology">
                            
                            Synology NAS
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/shared-hosting.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-shared-hosting">
                            
                            Shared hosting
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/hosting-1-click.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-hosting-1-click">
                            
                            1-click installations
                            
                        </a>
                        
                        
                    </div>
                    
                    
                    
                    <p class="fs-lg mb-1 text-white fw-bold">DevOps</p>
                    <div class="list-group list-group-flush mb-4 me-n4 border-start">
                        
                        
                        
                        
                        <a href="/documentation/backups.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-backups">
                            
                            Backups
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/local-yaml.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-local-yaml">
                            
                            Configuration files
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/emails.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-emails">
                            
                            Emails
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/logging.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-logging">
                            
                            Logging
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/commands.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-commands">
                            
                            Commands
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/faq-onpremise.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-faq-onpremise">
                            
                            FAQ
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/migration-v1.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-migration-v1">
                            
                            Migrate from Kimai v1
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/versions.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-versions">
                            
                            Kimai versions
                            
                        </a>
                        
                        
                    </div>
                    
                    
                    
                    <p class="fs-lg mb-1 text-white fw-bold">Authenticator</p>
                    <div class="list-group list-group-flush mb-4 me-n4 border-start">
                        
                        
                        
                        
                        <a href="/documentation/ldap.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-ldap">
                            
                            LDAP
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/saml.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-saml">
                            
                            SAML
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/saml-azure.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2  active" id="docnavi-saml-azure">
                            
                            Azure SAML
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/saml-google.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-saml-google">
                            
                            Google SAML
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/saml-keycloak.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-saml-keycloak">
                            
                            Keycloak SAML
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/saml-authentik.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-saml-authentik">
                            
                            Authentik SAML
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/saml-adfs.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-saml-adfs">
                            
                            Microsoft ADFS
                            
                        </a>
                        
                        
                    </div>
                    
                    
                    
                    <p class="fs-lg mb-1 text-white fw-bold">Plugins</p>
                    <div class="list-group list-group-flush mb-4 me-n4 border-start">
                        
                        
                        
                        
                        <a href="/documentation/plugin-contract.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-plugin-contract">
                            
                            Working contract
                            
                        </a>
                        
                        
                    </div>
                    
                    <div class="list-group list-group-flush pb-3 mb-4 mx-n4">
                
                    <a href="/" class="list-group-item list-group-item-action border-0 py-1 fs-sm px-4">Kimai Home</a>
                    <a href="/en/site-notice.html" class="list-group-item list-group-item-action border-0 py-1 fs-sm px-4">Site notice</a>
                    <a href="/en/privacy-policy.html" class="list-group-item list-group-item-action border-0 py-1 fs-sm px-4">Privacy policy</a>
                </div>
            </div>
        </div>
    </div>
</aside>
<script>
    document.addEventListener("DOMContentLoaded", function(event) {
        const dpm = document.getElementById('docnavi-saml-azure');
        if (dpm !== null) {
            dpm.scrollIntoView({ behavior: "smooth", block: "end", inline: "nearest" });
        }
    });
</script>
<main class="docs-container pt-5">
    <div class="container-fluid px-xxl-5 px-lg-4 pt-4 pt-lg-5 pb-2 pb-lg-4">

        <div class="d-sm-flex align-items-end justify-content-between ps-lg-2 ps-xxl-0 mt-2 mt-lg-0 pt-4 mb-n3">
            <div class="me-4">
                <h1 class="pb-1">Azure SAML</h1>
                
                <p class="text-muted fs-lg mb-2">How to use Azure AD SAML identity provider with Kimai</p>
                
            </div>
            




    <div class="dropdown">
        <a class="btn btn-outline-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Older versions
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
            
            <a class="dropdown-item" href="/documentation/1.30.0/saml-azure.html">Kimai 1.30.0</a>
            
            
            <a class="dropdown-item" href="/documentation/saml-azure.html">2.28.0 (latest version)</a>
        </div>
    </div>


        </div>

        <div class="markdown py-5 ps-lg-2 ps-xxl-0">
            <div>
                
                <div id="documentation-content">
                    <p>Go back to general <a href="/documentation/saml.html">SAML configuration</a> for Kimai.</p>

<p>SAML authentication with Azure accounts has proven to work. It requires four phases to get SAML configured. We will call them:</p>
<ul>
  <li>Toolkit Setup</li>
  <li>Kimai Configuration</li>
  <li>Adding Users and Testing the Toolkit</li>
</ul>

<p><strong>Note</strong>: The Azure AD is a part of the Microsoft Cloud offerings; you will likely need either a Microsoft Cloud license 
or an Office 365 license associated with your domain. But it also works with a “Usage based Microsoft Azure Plan” account 
in which Azure AD can be used free of charge.</p>

<h3 id="toolkit-setup">Toolkit Setup</h3>

<p>Please check the following steps to set up an enterprise application using the SAML toolkit.
This documentation is available in other languages as well <a href="https://docs.microsoft.com/en-us/azure/active-directory/saas-apps/saml-toolkit-tutorial#adding-azure-ad-saml-toolkit-from-the-gallery">in the Microsoft documentation</a></p>

<ul>
  <li>Sign in to the Azure portal.</li>
  <li>On the left navigation pane, select the <strong>Azure Active Directory</strong> service.</li>
  <li>Navigate to <strong>Enterprise Applications</strong> and then select <strong>All Applications</strong>.</li>
  <li>To add new application, select <strong>New application</strong>.</li>
  <li>In the Add from the gallery section, type <strong>Azure AD SAML Toolkit</strong> in the search box.</li>
  <li>Select <strong>Azure AD SAML Toolkit</strong> from the results panel and then add the app.</li>
  <li>On the left navigation panel, select the <strong>Azure Active Directory</strong> service.</li>
  <li>Navigate to <strong>App registrations</strong> and then select <strong>All Applications</strong>.</li>
  <li>Please click on the newly created application <strong>Azure AD SAML Toolkit</strong> and then select <strong>Branding</strong> on the left navigation bar to change the name of the application to “Kimai”.<br />
<strong>Note</strong>: The name of the application has no technical effect, but could be displayed to users during login.</li>
  <li>Click on <strong>Overview</strong> on the left navigation panel. Now click on the value under <strong>Managed application in local directory</strong>:</li>
</ul>

<figure class="d-block figure mb-3" style="max-width: 900px">
    <img src="/images/documentation/azure-saml-pic1.webp" class="figure-img img-fluid rounded" />
    <figcaption class="figure-caption">Managed applications</figcaption>
</figure>

<ul>
  <li>Now navigate to <strong>Single sign-on</strong> on the left navigation and choose <strong>SAML</strong> as your choice:</li>
</ul>

<figure class="d-block figure mb-3" style="max-width: 900px">
    <img src="/images/documentation/azure-saml-pic2.webp" class="figure-img img-fluid rounded" />
    <figcaption class="figure-caption">Select SAML</figcaption>
</figure>

<ul>
  <li>Edit the <strong>Basic SAML Configuration</strong> at the top and add the required <strong>URLs</strong>:</li>
</ul>

<figure class="d-block figure mb-3" style="max-width: 900px">
    <img src="/images/documentation/azure-saml-pic3.webp" class="figure-img img-fluid rounded" />
    <figcaption class="figure-caption">Basic SAML configuration</figcaption>
</figure>

<table class="table">
  <thead>
    <tr>
      <th>Setting</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Identifier (Entity ID)</td>
      <td>https://timetracking.example.com/auth/saml/metadata</td>
    </tr>
    <tr>
      <td>Reply URL (Assertion Consumer Service URL)</td>
      <td>https://timetracking.example.com/auth/saml/acs</td>
    </tr>
    <tr>
      <td>Sign on URL</td>
      <td>https://timetracking.example.com/</td>
    </tr>
    <tr>
      <td>Logout Url</td>
      <td>https://timetracking.example.com/auth/saml/logout</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>Edit the <strong>User Attributes &amp; Claims</strong> and ensure the following settings:</li>
</ul>

<figure class="d-block figure mb-3" style="max-width: 900px">
    <img src="/images/documentation/azure-saml-pic4.webp" class="figure-img img-fluid rounded" />
    <figcaption class="figure-caption">User Attributes &amp; Claims</figcaption>
</figure>

<ul>
  <li>Return to the <strong>Single Sign-On</strong> (visible in the left navigation panel) and download <strong>Certificate (Base64)</strong>:</li>
</ul>

<figure class="d-block figure mb-3" style="max-width: 900px">
    <img src="/images/documentation/azure-saml-pic6.webp" class="figure-img img-fluid rounded" />
    <figcaption class="figure-caption">Download Certificate</figcaption>
</figure>

<ul>
  <li>Copy the three values of <strong>Set up Kimai</strong>, as we will need them to configure Kimai:</li>
</ul>

<figure class="d-block figure mb-3" style="max-width: 900px">
    <img src="/images/documentation/azure-saml-pic7.webp" class="figure-img img-fluid rounded" />
    <figcaption class="figure-caption">Copy Azure URLs</figcaption>
</figure>

<h3 id="kimai-configuration">Kimai Configuration</h3>

<p>Please copy &amp; paste the entire <a href="/documentation/saml.html">SAML configuration</a>.
Adjust the following keys with your Azure / App specific settings:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">kimai</span><span class="pi">:</span>
    <span class="na">saml</span><span class="pi">:</span>
        <span class="na">provider</span><span class="pi">:</span> <span class="s">microsoft</span>
        <span class="na">activate</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">title</span><span class="pi">:</span> <span class="s">Login with Azure AD</span>
        <span class="na">mapping</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="pi">{</span> <span class="nv">saml</span><span class="pi">:</span> <span class="nv">$http</span><span class="pi">:</span><span class="nv">//schemas.xmlsoap.org/ws/2005/05/identity/claims/name</span><span class="pi">,</span> <span class="nv">kimai</span><span class="pi">:</span> <span class="nv">username</span> <span class="pi">}</span>
            <span class="pi">-</span> <span class="pi">{</span> <span class="nv">saml</span><span class="pi">:</span> <span class="nv">$http</span><span class="pi">:</span><span class="nv">//schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</span><span class="pi">,</span> <span class="nv">kimai</span><span class="pi">:</span> <span class="nv">email</span> <span class="pi">}</span>
            <span class="pi">-</span> <span class="pi">{</span> <span class="nv">saml</span><span class="pi">:</span> <span class="nv">$http</span><span class="pi">:</span><span class="nv">//schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname $http</span><span class="pi">:</span><span class="nv">//schemas.xmlsoap.org/ws/2005/05/identity/claims/surname</span><span class="pi">,</span> <span class="nv">kimai</span><span class="pi">:</span> <span class="nv">alias</span> <span class="pi">}</span>
            <span class="pi">-</span> <span class="pi">{</span> <span class="nv">saml</span><span class="pi">:</span> <span class="nv">$http</span><span class="pi">:</span><span class="nv">//schemas.xmlsoap.org/ws/2005/05/identity/claims/displayname</span><span class="pi">,</span> <span class="nv">kimai</span><span class="pi">:</span> <span class="nv">title</span> <span class="pi">}</span>
        <span class="na">roles</span><span class="pi">:</span>
            <span class="na">resetOnLogin</span><span class="pi">:</span> <span class="kc">true</span>
            <span class="na">attribute</span><span class="pi">:</span> <span class="s">http://schemas.microsoft.com/ws/2008/06/identity/claims/groups</span>
            <span class="na">mapping</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="pi">{</span> <span class="nv">saml</span><span class="pi">:</span> <span class="nv">xxxxxxxx-yyyy-xxxx-yyyy-xxxxxxxxxxxx</span><span class="pi">,</span> <span class="nv">kimai</span><span class="pi">:</span> <span class="nv">ROLE_ADMIN</span> <span class="pi">}</span>
                <span class="pi">-</span> <span class="pi">{</span> <span class="nv">saml</span><span class="pi">:</span> <span class="nv">Azure-Group-Object-Id</span><span class="pi">,</span> <span class="nv">kimai</span><span class="pi">:</span> <span class="nv">ROLE_TEAMLEAD</span> <span class="pi">}</span>
        <span class="na">connection</span><span class="pi">:</span>
            <span class="na">idp</span><span class="pi">:</span>
                <span class="na">entityId</span><span class="pi">:</span> <span class="s1">'</span><span class="s">https://sts.windows.net/****-****-***/'</span>
                <span class="na">singleSignOnService</span><span class="pi">:</span>
                    <span class="na">url</span><span class="pi">:</span> <span class="s1">'</span><span class="s">https://login.microsoftonline.com/****-****-***/saml2'</span>
                <span class="na">x509cert</span><span class="pi">:</span> <span class="s1">'</span><span class="s">ADD</span><span class="nv"> </span><span class="s">YOUR</span><span class="nv"> </span><span class="s">CERTIFICATE</span><span class="nv"> </span><span class="s">HERE'</span>
            <span class="na">sp</span><span class="pi">:</span>
                <span class="na">entityId</span><span class="pi">:</span> <span class="s1">'</span><span class="s">https://timetracking.example.com/auth/saml/metadata'</span>
                <span class="na">assertionConsumerService</span><span class="pi">:</span>
                    <span class="na">url</span><span class="pi">:</span> <span class="s1">'</span><span class="s">https://timetracking.example.com/auth/saml/acs'</span>
                <span class="na">singleLogoutService</span><span class="pi">:</span>
                    <span class="na">url</span><span class="pi">:</span> <span class="s1">'</span><span class="s">https://timetracking.example.com/auth/saml/logout'</span>
            <span class="na">security</span><span class="pi">:</span>
                <span class="na">requestedAuthnContext</span><span class="pi">:</span> <span class="kc">false</span>
</code></pre></div></div>

<ol>
  <li>Change the title to the wanted text on the login button
    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">title</span><span class="pi">:</span> <span class="s">Login with Azure</span>
</code></pre></div>    </div>
  </li>
  <li>Change the <strong>idp</strong> configuration and add the before copied URLs:
    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">entityId</span><span class="pi">:</span> <span class="s1">'</span><span class="s">https://sts.windows.net/****-****-***/'</span>                <span class="c1"># Azure AD Identifier</span>
<span class="na">singleSignOnService</span><span class="pi">:</span>
 <span class="na">url</span><span class="pi">:</span> <span class="s1">'</span><span class="s">https://login.microsoftonline.com/****-****-***/saml2'</span>  <span class="c1"># Login URL</span>
</code></pre></div>    </div>
  </li>
  <li>Change the <strong>sp</strong> configuration, replacing <strong>https://timetracking.example.com</strong> with your Kimai URL:
    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">entityId</span><span class="pi">:</span> <span class="s1">'</span><span class="s">https://timetracking.example.com/auth/saml/metadata'</span>
<span class="na">assertionConsumerService</span><span class="pi">:</span>
 <span class="na">url</span><span class="pi">:</span> <span class="s1">'</span><span class="s">https://timetracking.example.com/auth/saml/acs'</span>
<span class="na">singleLogoutService</span><span class="pi">:</span>
 <span class="na">url</span><span class="pi">:</span> <span class="s1">'</span><span class="s">https://timetracking.example.com/auth/saml/logout'</span>
</code></pre></div>    </div>
  </li>
  <li>Change the <strong>x509cert</strong> by opening the earlier downloaded certificate file (in a text editor) and copy the content to the config file and change it to one line  by removing the first line (BEGIN CERTIFICATE) and the last line (END CERTIFICATE) and then removing all line-breaks.
    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">x509cert</span><span class="pi">:</span>  <span class="s1">'</span><span class="s">REALLY</span><span class="nv"> </span><span class="s">LONG</span><span class="nv"> </span><span class="s">SET</span><span class="nv"> </span><span class="s">OF</span><span class="nv"> </span><span class="s">CHARACTERS'</span>
</code></pre></div>    </div>
  </li>
  <li><a href="/documentation/cache.html">Reload your cache</a></li>
</ol>

<h3 id="adding-users-and-testing-the-toolkit">Adding Users and Testing the Toolkit</h3>

<ol>
  <li>Sign in to the Azure portal using either a work or school account, or a personal Microsoft account.</li>
  <li>On the left navigation panel, select the <strong>Azure Active Directory</strong> service.</li>
  <li>Navigate to <strong>App registrations</strong> and then select <strong>All Applications</strong>.</li>
  <li>Please click on the Kimai application , we called it <strong>Kimai</strong>, and then navigate to <strong>Users and groups</strong> on the left navigation bar.</li>
  <li>Click on <strong>Add user/group</strong> and add the groups or users, who should have access.</li>
</ol>

<p>You should now be able to test the Login by visiting your Kimai URL and clicking on the title of the SAML method, you defined earlier.</p>

<h3 id="syncing-employee-id">Syncing Employee ID</h3>

<p>This is not a standard attribute in Azure AD. But if you want to sync a unique “Employee ID”, you could add a field mapping for the account number:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- { saml: $http://schemas.xmlsoap.org/ws/2005/05/identity/claims/employeeid, kimai: accountNumber }
</code></pre></div></div>

<h3 id="syncing-groups">Syncing Groups</h3>

<p>The example values for the group mapping from above:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    - { saml: xxxxxxxx-yyyy-xxxx-yyyy-xxxxxxxxxxxx, kimai: ROLE_ADMIN }
    - { saml: Azure-Group-Object-Id, kimai: ROLE_TEAMLEAD }
</code></pre></div></div>

<p>would lead with this Azure configuration</p>

<figure class="d-block figure mb-3" style="max-width: 900px">
    <img src="/images/documentation/azure-saml-groups.webp" class="figure-img img-fluid rounded" />
    <figcaption class="figure-caption">Group IDs</figcaption>
</figure>

<p>to this configuration:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    - { saml: 7f9597ed-8b67-45d7-bd5b-70d2659ad429, kimai: ROLE_ADMIN }
    - { saml: 998e116b-f8a1-4314-871c-045e92f82ce8, kimai: ROLE_TEAMLEAD }
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">Kimai System-Admin</code> group is not used in this example, but you would configure it in your local.yaml.</p>

                </div>
                

                
            </div>
        </div>

    </div>
</main>


    <aside class="side-nav side-nav-end d-none d-xxl-block position-fixed top-0 end-0 vh-100 py-5" style="width: 20rem;">
        <h3 class="fs-lg mt-5 pt-5">Jump to</h3>
        <ul class="nav" id="jumpToNav"><li class="nav-item"><a href="#toolkit-setup" class="nav-link">Toolkit Setup</a></li><li class="nav-item"><a href="#kimai-configuration" class="nav-link">Kimai Configuration</a></li><li class="nav-item"><a href="#adding-users-and-testing-the-toolkit" class="nav-link">Adding Users and Testing the Toolkit</a></li><li class="nav-item"><a href="#syncing-employee-id" class="nav-link">Syncing Employee ID</a></li><li class="nav-item"><a href="#syncing-groups" class="nav-link">Syncing Groups</a></li></ul>
        
    </aside>



<a href="#top" class="btn-scroll-top" data-scroll>
    <span class="btn-scroll-top-tooltip text-muted fs-sm me-2">Top</span>
    <i class="btn-scroll-top-icon bx bx-chevron-up"></i>
</a>

<script src="/assets/build/main.js?v1"></script>

<script async defer src="https://sa.kimai.org/latest.js"></script>
<noscript><img src="https://sa.kimai.org/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade" /></noscript>

</body>
</html>
