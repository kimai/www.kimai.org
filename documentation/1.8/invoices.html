<!doctype html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="theme-color" content="#4188c9">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="robots" content="index,follow">
    <link rel="apple-touch-icon" sizes="180x180" href="https://www.kimai.org/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://www.kimai.org/images/icon_32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://www.kimai.org/images/icon_16x16.png">
    <title>Invoices – Kimai</title>
    <meta name="description" content="Create invoices directly within Kimai from timesheet data in several formats">
    <meta property="og:description" content="Create invoices directly within Kimai from timesheet data in several formats">
    <meta name="twitter:description" content="Create invoices directly within Kimai from timesheet data in several formats">
    <link type="application/atom+xml" rel="alternate" href="https://www.kimai.org/feed.xml" title="Kimai Time-Tracking" />
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Kimai Time-Tracking">
    <meta property="og:image" content="https://www.kimai.org/images/social-preview.webp">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Kimai Time-Tracking">
    <meta name="twitter:site" content="@kimai_org">
    <meta name="twitter:image" content="https://www.kimai.org/images/social-preview.webp">
    <link rel="canonical" href="https://www.kimai.org/documentation/invoices.html" />
    <link rel="alternate" hreflang="en" href="https://www.kimai.org/documentation/1.14/invoices.html">
    <link rel="alternate" hreflang="en" href="https://www.kimai.org/documentation/1.15/invoices.html">
    <link rel="alternate" hreflang="en" href="https://www.kimai.org/documentation/1.8/invoices.html">
    <link href="/assets/build/main.css?v6" rel="stylesheet" />
</head>
<body class="">











<header class="header navbar navbar-expand bg-light border-bottom border-light shadow fixed-top" data-scroll-header>
    <div class="container-fluid pe-lg-4">
        <div class="d-flex align-items-center">
            <a href="/" class="navbar-brand flex-shrink-0 py-1 py-lg-2">
                <img src="/images/apple-touch-icon.png" width="32" alt="Kimai logo" class="me-2">
                Kimai Docs
            </a>
            <span class="badge bg-warning">User manual</span>
        </div>
        <div class="d-flex align-items-center w-100">
            <ul class="navbar-nav d-none d-lg-flex" style="padding-left: 6.75rem;">
                
                    
                    
                    <li class="nav-item">
                        <a href="/documentation/chapter-manual.html" class="nav-link  active">
                            <i class="bx bx-book opacity-70 fs-lg me-1"></i>
                            User manual
                        </a>
                    </li>
                
                    
                    
                    <li class="nav-item">
                        <a href="/documentation/cloud.html" class="nav-link ">
                            <i class="bx bx-cloud opacity-70 fs-lg me-1"></i>
                            Kimai-Cloud
                        </a>
                    </li>
                
                    
                    
                    <li class="nav-item">
                        <a href="/documentation/chapter-on-premise.html" class="nav-link ">
                            <i class="bx bx-server opacity-70 fs-lg me-1"></i>
                            On-Premise
                        </a>
                    </li>
                
                    
                    
                    <li class="nav-item">
                        <a href="/documentation/chapter-developer.html" class="nav-link ">
                            <i class="bx bx-code-alt opacity-70 fs-lg me-1"></i>
                            Developer
                        </a>
                    </li>
                
            </ul>
            <button type="button" class="navbar-toggler d-block d-lg-none ms-auto me-4" data-bs-toggle="offcanvas" data-bs-target="#componentsNav" aria-controls="componentsNav" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </div>
</header>

<aside class="bg-dark">
    <div id="componentsNav" class="offcanvas-lg offcanvas-start d-flex flex-column position-fixed top-0 start-0 vh-100 bg-dark border-end-lg" style="width: 19rem; z-index: 1045;">
        <div class="offcanvas-header d-none d-lg-flex justify-content-start">
            <a href="/" class="navbar-brand d-none d-lg-flex py-0">
                <img src="/images/apple-touch-icon.png" width="26" alt="Kimai logo" class="me-3">
                Kimai Docs
            </a>
        </div>
        <div class="offcanvas-header d-block d-lg-none border-bottom">
            <div class="d-flex align-items-center justify-content-between mb-3">
                <h5 class="d-lg-none mb-0">Menu</h5>
                <button type="button" class="btn-close d-lg-none" data-bs-dismiss="offcanvas" data-bs-target="#componentsNav" aria-label="Close"></button>
            </div>
            <div class="list-group list-group-flush mx-n4">
                
                    
                    
                    <a href="/documentation/chapter-manual.html" class="list-group-item list-group-item-action d-flex align-items-center border-0 py-1 px-4">
                        <i class="bx bx-book opacity-70 me-1"></i>
                        User manual
                    </a>
                
                    
                    
                    <a href="/documentation/cloud.html" class="list-group-item list-group-item-action d-flex align-items-center border-0 py-1 px-4">
                        <i class="bx bx-cloud opacity-70 me-1"></i>
                        Kimai-Cloud
                    </a>
                
                    
                    
                    <a href="/documentation/chapter-on-premise.html" class="list-group-item list-group-item-action d-flex align-items-center border-0 py-1 px-4">
                        <i class="bx bx-server opacity-70 me-1"></i>
                        On-Premise
                    </a>
                
                    
                    
                    <a href="/documentation/chapter-developer.html" class="list-group-item list-group-item-action d-flex align-items-center border-0 py-1 px-4">
                        <i class="bx bx-code-alt opacity-70 me-1"></i>
                        Developer
                    </a>
                
            </div>
        </div>
        <div class="offcanvas-body overflow-scroll w-100 p-4">
            <div class="h-auto docsnavi">
                
                    
                    
                    
                    
                    <p class="fs-lg mb-1 text-white fw-bold">Using Kimai</p>
                    <div class="list-group list-group-flush mb-4 me-n4 border-start">
                        
                        
                        
                        
                        <a href="/documentation/timesheet.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-timesheet">
                            
                            Timesheet
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/weekly-times.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-weekly-times">
                            
                            Weekly working hours
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/calendar.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-calendar">
                            
                            Calendar
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/invoices.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2  active" id="docnavi-invoices">
                            
                            Invoices
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/export.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-export">
                            
                            Export
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/reporting.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-reporting">
                            
                            Reporting
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/customer.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-customer">
                            
                            Customer
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/project.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-project">
                            
                            Projects
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/activity.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-activity">
                            
                            Activities
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/tags.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-tags">
                            
                            Tags
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/users.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-users">
                            
                            Users
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/user-preferences.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-user-preferences">
                            
                            User preferences
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/permissions.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-permissions">
                            
                            Roles &amp; Permissions
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/teams.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-teams">
                            
                            Teams
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/configurations.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-configurations">
                            
                            Settings
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/doctor.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-doctor">
                            
                            Doctor
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/contract.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-contract">
                            
                            Working times
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/public-holiday.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-public-holiday">
                            
                            Public holiday
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/absence.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-absence">
                            
                            Absence
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/dashboard.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-dashboard">
                            
                            Dashboard
                            
                        </a>
                        
                        
                    </div>
                    
                    
                    
                    <p class="fs-lg mb-1 text-white fw-bold">Additional features</p>
                    <div class="list-group list-group-flush mb-4 me-n4 border-start">
                        
                        
                        
                        
                        <a href="/documentation/plugin-custom-fields.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-plugin-custom-fields">
                            
                            Custom fields
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/plugin-expenses.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-plugin-expenses">
                            
                            Expenses
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/plugin-task-management.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-plugin-task-management">
                            
                            Task management
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/plugin-custom-css.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-plugin-custom-css">
                            
                            Custom CSS
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/plugin-custom-content.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-plugin-custom-content">
                            
                            Custom content
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/plugin-translation.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-plugin-translation">
                            
                            Translation
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/plugin-invoice.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-plugin-invoice">
                            
                            Invoice
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/plugin-import.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-plugin-import">
                            
                            Importer
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/plugin-audit-trail.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-plugin-audit-trail">
                            
                            Audit trail logs
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/plugin-kiosk.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-plugin-kiosk">
                            
                            Kiosk mode
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/plugin-customer-portal.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-plugin-customer-portal">
                            
                            Customer Portal
                            
                        </a>
                        
                        
                    </div>
                    
                    
                    
                    <p class="fs-lg mb-1 text-white fw-bold">Tips and Tricks</p>
                    <div class="list-group list-group-flush mb-4 me-n4 border-start">
                        
                        
                        
                        
                        <a href="/documentation/initial-setup.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-initial-setup">
                            
                            Initial setup
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/rates.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-rates">
                            
                            Prices (rates)
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/billable.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-billable">
                            
                            Billable
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/pdf-templates.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-pdf-templates">
                            
                            PDF templates
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/keyboard-shortcuts.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-keyboard-shortcuts">
                            
                            Keyboard shortcuts
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/i18n-am-pm.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-i18n-am-pm">
                            
                            Date and Time formats
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/duration-format.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-duration-format">
                            
                            Duration format
                            
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/documentation/homescreen.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-homescreen">
                            
                            Use Kimai as app
                            
                        </a>
                        
                        
                        
                        
                        
                        <a href="/documentation/user-api.html" class="list-group-item ms-2 list-group-item-action border-0 ps-2 " id="docnavi-user-api">
                            
                            Connecting via API
                            
                        </a>
                        
                        
                    </div>
                    
                    <div class="list-group list-group-flush pb-3 mb-4 mx-n4">
                
                    <a href="/" class="list-group-item list-group-item-action border-0 py-1 fs-sm px-4">Kimai Home</a>
                    <a href="/en/site-notice.html" class="list-group-item list-group-item-action border-0 py-1 fs-sm px-4">Site notice</a>
                    <a href="/en/privacy-policy.html" class="list-group-item list-group-item-action border-0 py-1 fs-sm px-4">Privacy policy</a>
                </div>
            </div>
        </div>
    </div>
</aside>
<script>
    document.addEventListener("DOMContentLoaded", function(event) {
        const dpm = document.getElementById('docnavi-invoices');
        if (dpm !== null) {
            dpm.scrollIntoView({ behavior: "smooth", block: "end", inline: "nearest" });
        }
    });
</script>
<main class="docs-container pt-5">
    <div class="container-fluid px-xxl-5 px-lg-4 pt-4 pt-lg-5 pb-2 pb-lg-4">

        <div class="d-sm-flex align-items-end justify-content-between ps-lg-2 ps-xxl-0 mt-2 mt-lg-0 pt-4 mb-n3">
            <div class="me-4">
                <h1 class="pb-1">Invoices</h1>
                
                <p class="text-muted fs-lg mb-2">Create invoices directly within Kimai from timesheet data in several formats</p>
                
            </div>
            




    <div class="dropdown">
        <a class="btn btn-outline-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Older versions
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
            
            <a class="dropdown-item" href="/documentation/1.8/invoices.html">Kimai 1.8</a>
            
            <a class="dropdown-item" href="/documentation/1.15/invoices.html">Kimai 1.15</a>
            
            <a class="dropdown-item" href="/documentation/1.14/invoices.html">Kimai 1.14</a>
            
            
            <a class="dropdown-item" href="/documentation/invoices.html">2.28.0 (latest version)</a>
        </div>
    </div>


        </div>

        <div class="markdown py-5 ps-lg-2 ps-xxl-0">
            <div>
                
                <div id="documentation-content">
                    
<div class="alert alert-danger d-flex" role="alert">
<i class="bx bx-info-circle lead me-3"></i>
<p>You are viewing an older version of this documentation page. A newer version is available <a href="/documentation/invoices.html">here</a>.</p>
</div>

<p>Kimai allows creating invoices from timesheet data in several formats.</p>

<div class="youtube-wrapper" style="max-width: 560px;">
    <iframe width="100%" height="315" src="https://www.youtube.com/embed/wrXqR4uhN-Q" title="Your first Kimai invoice" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>

<h2 id="invoice-number-format">Invoice number format</h2>

<p>You can mix arbitrary characters and the allowed replacer from the list below.
All examples represent the date <code class="language-plaintext highlighter-rouge">2019-07-09</code> (2019, July 9th):</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">{date}</code>      - shortcut for <code class="language-plaintext highlighter-rouge">ymd</code>. Example: <code class="language-plaintext highlighter-rouge">190709</code> (default format before Kimai 1.9)</li>
  <li>
<code class="language-plaintext highlighter-rouge">{cname}</code>     - the customer name</li>
  <li>
<code class="language-plaintext highlighter-rouge">{cnumber}</code>   - the customer number</li>
  <li>
<code class="language-plaintext highlighter-rouge">{c}</code>         - counter for invoices of all times, starting at 1</li>
  <li>
<code class="language-plaintext highlighter-rouge">{cy}</code>        - counter for invoices this year, starting at 1</li>
  <li>
<code class="language-plaintext highlighter-rouge">{cm}</code>        - counter for invoices this month, starting at 1</li>
  <li>
<code class="language-plaintext highlighter-rouge">{cd}</code>        - counter for invoices this day, starting at 1</li>
  <li>
<code class="language-plaintext highlighter-rouge">{Y}</code>         -  full numeric representation of a year (4 digits). Example: <code class="language-plaintext highlighter-rouge">2019</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">{y}</code>         - two digit representation of a year. Example: <code class="language-plaintext highlighter-rouge">19</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">{M}</code>         - numeric representation of a month, with leading zeros. Example: <code class="language-plaintext highlighter-rouge">07</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">{m}</code>         - numeric representation of a month, without leading zeros. Example: <code class="language-plaintext highlighter-rouge">7</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">{D}</code>         - day of the month, 2 digits with leading zeros. Example: <code class="language-plaintext highlighter-rouge">09</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">{d}</code>         - day of the month without leading zeros. Example: <code class="language-plaintext highlighter-rouge">9</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">{cc}</code>        - per customer invoice counter for all times, starting at 1</li>
  <li>
<code class="language-plaintext highlighter-rouge">{ccy}</code>       - per customer invoice counter for this year, starting at 1</li>
  <li>
<code class="language-plaintext highlighter-rouge">{ccm}</code>       - per customer invoice counter for this month, starting at 1</li>
  <li>
<code class="language-plaintext highlighter-rouge">{ccd}</code>       - per customer invoice counter for this day, starting at 1</li>
  <li>
<code class="language-plaintext highlighter-rouge">{cu}</code>        - per user (the one creating the invoice) invoice counter for all times, starting at 1</li>
  <li>
<code class="language-plaintext highlighter-rouge">{cuy}</code>       - per user (the one creating the invoice) invoice counter for this year, starting at 1</li>
  <li>
<code class="language-plaintext highlighter-rouge">{cum}</code>       - per user (the one creating the invoice) invoice counter for this month, starting at 1</li>
  <li>
<code class="language-plaintext highlighter-rouge">{cud}</code>       - per user (the one creating the invoice) invoice counter for this day, starting at 1</li>
  <li>
<code class="language-plaintext highlighter-rouge">{ustaff}</code>    - the user (the one creating the invoice) staff number, empty if not configured</li>
  <li>
<code class="language-plaintext highlighter-rouge">{uid}</code>       - the internal user (the one creating the invoice) ID</li>
</ul>

<p>Each replacer (x) can be combined with a length formatter, which will prepend (X) leading zeros, eg. <code class="language-plaintext highlighter-rouge">{x,X}</code>.
Example: to get a three digit long string with year counter use <code class="language-plaintext highlighter-rouge">{cy,3}</code>, which results in <code class="language-plaintext highlighter-rouge">001</code> for the first invoice of the year.</p>

<div class="alert alert-warning d-flex" role="alert">
<i class="bx bx-alarm-exclamation lead me-3"></i>
<p>Characters outside the replacer <strong>cannot</strong> include <code class="language-plaintext highlighter-rouge">{</code> and <code class="language-plaintext highlighter-rouge">}</code>.</p>
</div>

<p>To change the format, look out for the <a class="btn btn-secondary px-3" href="#"><i class="bx bx-cog pe-2"></i></a>
 icon in the invoice screen, or change it from the <code class="language-plaintext highlighter-rouge">System configurations</code>.</p>

<h3 id="incrementing-the-invoice-counter">Incrementing the invoice counter</h3>

<p>It is possible to increment the counter by adding a number to the result.
For evaluated counters, Kimai takes the amount of found invoices and adds 1, but you can replace <code class="language-plaintext highlighter-rouge">+1</code> with an addition like <code class="language-plaintext highlighter-rouge">+3</code>.
This works for the following replacer: <code class="language-plaintext highlighter-rouge">{c}</code> and <code class="language-plaintext highlighter-rouge">{cy}</code> and <code class="language-plaintext highlighter-rouge">{cm}</code> and <code class="language-plaintext highlighter-rouge">{cd}</code> and <code class="language-plaintext highlighter-rouge">{cc}</code> and <code class="language-plaintext highlighter-rouge">{ccy}</code> and <code class="language-plaintext highlighter-rouge">{ccm}</code> and <code class="language-plaintext highlighter-rouge">{ccd}</code>.</p>

<p>Simply use the plus (<code class="language-plaintext highlighter-rouge">+</code>) after the replacer, eg. <code class="language-plaintext highlighter-rouge">{cy+72}</code>. This also works in combination with the length formatter, eg.: <code class="language-plaintext highlighter-rouge">{cy+72,3}</code></p>

<h3 id="decrementing-the-invoice-counter">Decrementing the invoice counter</h3>

<p>You can decrement the counter subtracting a number from the result.
For evaluated counters, Kimai takes the amount of found invoices and adds <code class="language-plaintext highlighter-rouge">+1</code>, but you can replace <code class="language-plaintext highlighter-rouge">+1</code> with a subtraction like <code class="language-plaintext highlighter-rouge">-12</code>.
This works for the following replacer: <code class="language-plaintext highlighter-rouge">{c}</code> and <code class="language-plaintext highlighter-rouge">{cy}</code> and <code class="language-plaintext highlighter-rouge">{cm}</code> and <code class="language-plaintext highlighter-rouge">{cd}</code> and <code class="language-plaintext highlighter-rouge">{cc}</code> and <code class="language-plaintext highlighter-rouge">{ccy}</code> and <code class="language-plaintext highlighter-rouge">{ccm}</code> and <code class="language-plaintext highlighter-rouge">{ccd}</code>.</p>

<p>Simply use the minus (<code class="language-plaintext highlighter-rouge">-</code>) after the replacer, eg. <code class="language-plaintext highlighter-rouge">{cy-72}</code>. This also works in combination with the length formatter, eg.: <code class="language-plaintext highlighter-rouge">{cy-72,3}</code></p>

<h3 id="examples">Examples</h3>

<p>Assume you already wrote 72 invoices this year (before you started to use Kimai), and your counter is an incrementing number
per year, which is prefixed with the four digit year:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">{Y}/{cy+73,3}</code> would result in <code class="language-plaintext highlighter-rouge">2020/073</code> for your first invoice</li>
</ul>

<p>Assume that you want to change your invoice numbering and reset it to zero, you already wrote 72 invoices this year, and your counter is an incrementing number per year that should be prefixed with the four digit year:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">{Y}/{cy-72,3}</code> would result in <code class="language-plaintext highlighter-rouge">2020/001</code> for your first invoice</li>
</ul>

<h2 id="invoice-state">Invoice state</h2>

<p>Invoices can have multiple states:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">New</code> - the invoice was just created</li>
  <li>
<code class="language-plaintext highlighter-rouge">Waiting for payment</code> - the invoice was sent to the customer</li>
  <li>
<code class="language-plaintext highlighter-rouge">Invoice paid</code> - the invoice was paid (you have to choose a payment date)</li>
  <li>
<code class="language-plaintext highlighter-rouge">Canceled</code> - the invoice was accidentally created</li>
</ul>

<h3 id="deleting-invoices">Deleting invoices</h3>

<p>Invoices should not be deleted, because this can cause all kinds of weird problems in Kimai (depending on your invoice number format).</p>

<p>You should instead “cancel” invalid invoices. Many users fear legal issues if they don’t have consecutive invoice numbers, 
please clarify that with your accountant - this is often not a legal requirement. Instead it is a completely regular workflow, 
that invoices get canceled (the used invoice number will not be released).</p>

<p>If you insist on deleting invoices, do NOT delete them if you already created invoices afterwards.
This will cause troubles with your invoice counter, as Kimai is calculating invoice numbers from the amount of entries in the database.
By deleting invoices you lower the amount of invoices in the database, and the next invoice number might be one that you already used.</p>

<p>Invoice deletion is disabled by default, because of all known problems with deletion. 
You can activate it enabling the <a href="/documentation/permissions.html">permissions</a> called <code class="language-plaintext highlighter-rouge">delete_invoice</code>.</p>

<h2 id="export-state">Export state</h2>

<p>Invoices and exports share the export state, which is used to mark timesheet records as processed.
These records cannot be edited any longer by regular users and are excluded by default from further invoices and exports.</p>

<p>You need to tick the checkbox before saving the invoice, to automatically set the export state on all filtered timesheet records.</p>

<p>For further information read the <a href="/documentation/timesheet.html">timesheet documentation</a>.</p>

<h2 id="billable-items-only">Billable items only</h2>

<p>Only billable items will be included in invoices.</p>

<p>By default, every timesheet records is billable, but users can set the billable flag on individual timesheets.</p>

<p><a href="/store/expenses-bundle.html">Expense items</a> have a configurable billable flag per item and only the ones marked as billable (refundable) will be included.</p>

<hr>

<h2 id="invoice-document">Invoice document</h2>

<p>The invoice system currently supports the following formats:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">PDF</code>
    <ul>
      <li>through the use of Twig templates</li>
      <li>filename must end with <code class="language-plaintext highlighter-rouge">.pdf.twig</code>
</li>
      <li>Pro: no need for additional software</li>
      <li>Contra: you have to understand HTML, Twig and the MPDF library</li>
      <li><strong>the recommended invoice document format</strong></li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">HTML</code>
    <ul>
      <li>through the use of Twig templates</li>
      <li>filename must end with <code class="language-plaintext highlighter-rouge">.html.twig</code>
</li>
      <li>Pro: no need for additional software, print or convert to PDF from your browser (if supported)</li>
      <li>Contra: you have to understand HTML and Twig</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">DOCX</code>
    <ul>
      <li>OOXML - Open Office XML Text</li>
      <li>Microsoft Word 2007-2013 XML</li>
      <li>filename must end with <code class="language-plaintext highlighter-rouge">.docx</code>
</li>
      <li>Pro: simple customization and possibility to edit the invoice later on</li>
      <li>Contra: Non-free software required</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">ODS</code>
    <ul>
      <li>Open Document Spreadsheet or OASIS, is the OpenOffice.org XML file format for spreadsheets supported by OpenOffice, LibreOffice, StarCalc, Microsoft and others</li>
      <li>file extension: filename must end with <code class="language-plaintext highlighter-rouge">.ods</code>
</li>
      <li>Pro: open format, good for exporting and creating enhanced reports with an office software package</li>
      <li>Contra: not ideal format for invoices (harder to customize)</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">XLSX</code>
    <ul>
      <li>Microsoft Excel™ 2007 shipped with a new file format, namely Microsoft Office Open XML SpreadsheetML, and Excel 2010 extended this still further with new features.</li>
      <li>file extension: filename must end with <code class="language-plaintext highlighter-rouge">.xlsx</code>
</li>
      <li>Pro: good for creating enhanced reports with an office software package</li>
      <li>Contra: Non-free software required, not ideal format for invoices</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">CSV</code>
    <ul>
      <li>Comma-separated file with UTF-8 encoding and double-quotes around each field</li>
      <li>filename must end with <code class="language-plaintext highlighter-rouge">.csv</code>
</li>
      <li>Pro: good for exporting and creating enhanced reports with an office software package</li>
      <li>Contra: only row based information possible (meta information can’t be used properly), UTF-8 is not properly supported when using Excel (see <a href="https://github.com/kimai/kimai/issues/1537">this issue</a>)</li>
    </ul>
  </li>
</ul>

<h3 id="create-your-own-invoice-document">Create your own invoice document</h3>

<p>Invoice documents are searched in two locations:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">var/invoices/</code> - does not exist by default, please create it when you add a new document</li>
  <li>
<code class="language-plaintext highlighter-rouge">templates/invoice/renderer/</code> - don’t change files in here, will be overwritten with the next update</li>
</ul>

<p>Be aware of the following rules:</p>

<ul>
  <li>Documents are addressed by their filename without extension (e.g. <code class="language-plaintext highlighter-rouge">kimai.html.twig</code> results in <code class="language-plaintext highlighter-rouge">kimai</code>)</li>
  <li>You can use every document name only once: so having <code class="language-plaintext highlighter-rouge">kimai.html.twig</code> and <code class="language-plaintext highlighter-rouge">kimai.docx</code> will lead to unpredictable results (the first file to be found takes precedence)</li>
  <li>Kimai looks for templates in <code class="language-plaintext highlighter-rouge">var/invoices/</code> first, so you can overwrite default templates</li>
  <li>You should store your templates in <code class="language-plaintext highlighter-rouge">var/invoices/</code>, as this directory is not shipped with Kimai and not touched during updates</li>
  <li>You can <a href="/documentation/local-yaml.html">configure different search directories</a> through the config key <code class="language-plaintext highlighter-rouge">kimai.invoice.documents</code> if you want to add additional template source directories</li>
</ul>

<div class="alert alert-warning d-flex" role="alert">
<i class="bx bx-alarm-exclamation lead me-3"></i><p>Do NOT change the default templates, but copy the file and save it (with a new filename) at var/invoices/</p>
</div>

<p>After you changed an invoice template, you have to <a href="/documentation/cache.html">clear the cache</a> to see the results.</p>

<p>You can have a look at <a href="https://github.com/Keleo/kimai2-invoice-templates">https://github.com/Keleo/kimai2-invoice-templates</a> to get some code inspirations.</p>

<h3 id="twig-templates">Twig templates</h3>

<p>Generally speaking, you have two main variables in your template which you should use:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">model</code> which is an instance of <code class="language-plaintext highlighter-rouge">App\Model\InvoiceModel</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">invoice</code> which is an array of variables (see <code class="language-plaintext highlighter-rouge">Template variables</code> below), just with a different syntax for access, e.g.: <code class="language-plaintext highlighter-rouge">{{ invoice['invoice.due_date'] }}</code> instead of <code class="language-plaintext highlighter-rouge">${invoice.due_date}</code>
</li>
</ul>

<p>Please see the <a href="https://github.com/kimai/kimai/blob/main/templates/invoice/renderer">default templates</a> at
GitHub to find out which variables can be used.</p>

<p>Use this debug template to find out which variables are available:</p>
<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">{{</span> <span class="nv">model.invoiceNumber</span> <span class="cp">}}</span>-<span class="cp">{{</span> <span class="nv">model.customer.company</span><span class="o">|</span><span class="nf">default</span><span class="p">(</span><span class="nv">model.customer.name</span><span class="p">)</span><span class="o">|</span><span class="nf">u</span><span class="err">.</span><span class="nv">snake</span> <span class="cp">}}</span><span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;style </span><span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
        <span class="cp">{{</span> <span class="nv">encore_entry_css_source</span><span class="p">(</span><span class="s1">'invoice-pdf'</span><span class="p">)</span><span class="o">|</span><span class="nf">raw</span> <span class="cp">}}</span>
    <span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Please note, that the available variables will change depending on your search. E.g. the <span class="cp">{{</span> <span class="s1">'{{ project }}'</span> <span class="cp">}}</span> variables are only available if you selected a project in your search filter.<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>The following list of variables is available for this invoice:<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"items"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th&gt;</span>Variable<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th&gt;</span>Value<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
        <span class="cp">{%</span> <span class="k">for</span> <span class="nv">name</span><span class="p">,</span> <span class="nv">value</span> <span class="ow">in</span> <span class="nv">invoice</span> <span class="cp">%}</span>
            <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">cycle</span><span class="p">([</span><span class="s1">'odd'</span><span class="p">,</span> <span class="s1">'even'</span><span class="p">],</span> <span class="nv">loop.index0</span><span class="p">)</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="s2">"{{ invoice['"</span> <span class="err">~</span> <span class="nv">name</span> <span class="err">~</span> <span class="s2">"'] }}"</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
        <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>Want to include an image in your template? Use the <code class="language-plaintext highlighter-rouge">asset</code> tag for referencing relative URLs (this example points to the directory <code class="language-plaintext highlighter-rouge">public/images/my-logo.png</code>):</p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">asset</span><span class="p">(</span><span class="s1">'images/my-logo.png'</span><span class="p">)</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p>But the safest way is to host your images on your own domain:</p>

<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"https://www.example.com/images/my-logo.png"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p>Want to include a file in your template?
Use the twig include feature with the <code class="language-plaintext highlighter-rouge">@invoice</code> namespace . The following example references the file <code class="language-plaintext highlighter-rouge">bar.html.twig</code> in <code class="language-plaintext highlighter-rouge">var/invoices/foo/</code>:</p>
<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">{%</span> <span class="k">include</span> <span class="s1">'@invoice/foo/bar.html.twig'</span> <span class="cp">%}</span>
</code></pre></div></div>

<h4 id="custom-fields">Custom fields</h4>

<p>Iterating above all entries (line items) in the invoice with <code class="language-plaintext highlighter-rouge">{% for id, entry in model.calculator.entries %}</code> 
allows access to your custom fields.</p>

<p>Want to use a <strong>timesheet custom field</strong> in your template?</p>
<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">{%</span> <span class="k">set</span> <span class="nv">meta</span> <span class="o">=</span> <span class="nv">entry.getAdditionalField</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">)</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">meta</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">null</span> <span class="cp">%}</span>
    Foo: <span class="cp">{{</span> <span class="nv">meta</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre></div></div>
<p>Please be aware:</p>
<ul>
  <li>you can access timesheet custom fields only if you use the “sum calculation” standard, which creates one invoice line item per timesheet.</li>
  <li>if you group timesheets e.g. by project, you loose access to their custom fields.</li>
  <li>entries could be of type “expense” or other types (depending on your used plugins), you can test that with <code class="language-plaintext highlighter-rouge">{% if entry.type == 'timesheet' '%}</code>
</li>
</ul>

<p>Want to use a <strong>customer custom field</strong> in your template?</p>
<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">{%</span> <span class="k">set</span> <span class="nv">metaField</span> <span class="o">=</span> <span class="nv">entry.customer.metaField</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">)</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">metaField</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">null</span> <span class="ow">and</span> <span class="nv">metaField.value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">null</span> <span class="cp">%}</span>
    Foo: <span class="cp">{{</span> <span class="nv">metaField.value</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre></div></div>

<p>Want to use a <strong>project custom field</strong> in your template?</p>
<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">{%</span> <span class="k">set</span> <span class="nv">metaField</span> <span class="o">=</span> <span class="nv">entry.project.metaField</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">)</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">metaField</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">null</span> <span class="ow">and</span> <span class="nv">metaField.value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">null</span> <span class="cp">%}</span>
    Foo: <span class="cp">{{</span> <span class="nv">metaField.value</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre></div></div>

<p>Want to use a <strong>user preference</strong> in your template?</p>
<div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">{%</span> <span class="k">set</span> <span class="nv">meta</span> <span class="o">=</span> <span class="nv">entry.user.getPreferenceValue</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">)</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">meta</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">null</span> <span class="cp">%}</span>
    Foo: <span class="cp">{{</span> <span class="nv">meta</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre></div></div>

<h3 id="pdf-templates">PDF templates</h3>

<p>PDF invoice templates are basically the same as Twig templates. 
But the resulting HTML is processed by the <a href="https://mpdf.github.io">MPdf library</a>, which will convert the HTML &amp; CSS to PDF.
There are some additional contents, that will define e.g. page header and footer.</p>

<p>Please read the MPdf documentation and check the default PDF templates.</p>

<h3 id="docx-templates">Docx templates</h3>

<p>Docx templates are processed by <a href="https://github.com/PHPOffice/PHPWord">PHPWord</a> and its <code class="language-plaintext highlighter-rouge">TemplateProcessor</code>.</p>

<p><strong>Important:</strong> You have to add one of the variables - either <code class="language-plaintext highlighter-rouge">${entry.description}</code> or <code class="language-plaintext highlighter-rouge">${entry.row}</code> - in one table row,
otherwise the records will not be rendered (but only the global values)!</p>

<p>The row containing this variable will be cloned for every included (timesheet) record.</p>

<p>If you do not use <code class="language-plaintext highlighter-rouge">${entry.description}</code> then a fallback for <code class="language-plaintext highlighter-rouge">${entry.row}</code> is used and will be removed in the rendering process,
it will not show up in the generated invoice.</p>

<p>See below in <code class="language-plaintext highlighter-rouge">Template variables</code> to find out which variables you can use in your template.</p>

<p>Find out more about PHPWord templates <a href="https://phpword.readthedocs.io/en/latest/templates-processing.html">here</a>.</p>

<h3 id="spreadsheets-ods-xlsx-and-csv">Spreadsheets (ODS, XLSX and CSV)</h3>

<p>Spreadsheet templates are powered by <a href="https://github.com/PHPOffice/PhpSpreadsheet">PhpSpreadsheet</a>.</p>

<p><strong>Important:</strong> within the first 100 rows you MUST-HAVE the template row for timesheet entries, which means there must be
a value starting with <code class="language-plaintext highlighter-rouge">${entry.</code> in one of the first 10 columns, otherwise no timesheet records will be rendered!</p>

<p><em>Check the default templates if that doesn’t make sense to you ;-)</em></p>

<p>This row will then be cloned for every timesheet entry.</p>

<p>See below in <code class="language-plaintext highlighter-rouge">Template variables</code> to find out which variables you can use.</p>

<h2 id="template-variables">Template variables</h2>

<p>Be aware, that the following list of variables is only working for the “document” based formats, but NOT for twig templates.
Twig templates are rendered actively, it is up to the developer to calculate what is needed.</p>

<h3 id="global-variables">Global variables</h3>

<p>The documents which are rendered passively (ODS, XLSX, CSV, DOCX) can use the following global variables:</p>

<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>${invoice.due_date}</td>
      <td>The due date for the invoice payment</td>
    </tr>
    <tr>
      <td>${invoice.date}</td>
      <td>The creation date of this invoice</td>
    </tr>
    <tr>
      <td>${invoice.number}</td>
      <td>The generated invoice number</td>
    </tr>
    <tr>
      <td>${invoice.currency}</td>
      <td>The invoice currency</td>
    </tr>
    <tr>
      <td>${invoice.currency_symbol}</td>
      <td>The invoice currency as symbol (if available)</td>
    </tr>
    <tr>
      <td>${invoice.total_time}</td>
      <td>The total working time (entries with a fixed rate are always calculated with 1)</td>
    </tr>
    <tr>
      <td>${invoice.duration_decimal}</td>
      <td>The total working time as decimal value</td>
    </tr>
    <tr>
      <td>${invoice.language}</td>
      <td>The invoices language as two character code</td>
    </tr>
    <tr>
      <td>${invoice.total}</td>
      <td>The invoices total (including tax) with currency</td>
    </tr>
    <tr>
      <td>${invoice.total_nc}</td>
      <td>The invoices total (including tax) without currency</td>
    </tr>
    <tr>
      <td>${invoice.total_plain}</td>
      <td>The invoices total (including tax) as unformatted value</td>
    </tr>
    <tr>
      <td>${invoice.subtotal}</td>
      <td>The invoices subtotal (excluding tax) with currency</td>
    </tr>
    <tr>
      <td>${invoice.subtotal_nc}</td>
      <td>The invoices subtotal (excluding tax) without currency</td>
    </tr>
    <tr>
      <td>${invoice.subtotal_plain}</td>
      <td>The invoices subtotal (excluding tax) as unformatted value</td>
    </tr>
    <tr>
      <td>${invoice.currency}</td>
      <td>The invoices currency as string (like EUR or USD)</td>
    </tr>
    <tr>
      <td>${invoice.vat}</td>
      <td>The VAT in percent for this invoice</td>
    </tr>
    <tr>
      <td>${invoice.tax}</td>
      <td>The tax of the invoice amount with currency</td>
    </tr>
    <tr>
      <td>${invoice.tax_nc}</td>
      <td>The tax of the invoice amount without currency</td>
    </tr>
    <tr>
      <td>${invoice.tax_plain}</td>
      <td>The tax of the invoice amount as unformatted value</td>
    </tr>
    <tr>
      <td>${template.name}</td>
      <td>The invoice name, as configured in your template</td>
    </tr>
    <tr>
      <td>${template.company}</td>
      <td>The company name, as configured in your template</td>
    </tr>
    <tr>
      <td>${template.address}</td>
      <td>The invoicing address, as configured in your template</td>
    </tr>
    <tr>
      <td>${template.title}</td>
      <td>The invoice title, as configured in your template</td>
    </tr>
    <tr>
      <td>${template.payment_terms}</td>
      <td>Your payment terms, might be multiple lines</td>
    </tr>
    <tr>
      <td>${template.due_days}</td>
      <td>The amount of days for the payment, starting with the day of creating the invoice</td>
    </tr>
    <tr>
      <td>${template.vat_id}</td>
      <td>The Vat ID for this invoice</td>
    </tr>
    <tr>
      <td>${template.contact}</td>
      <td>Extended contact information, might be multiple lines</td>
    </tr>
    <tr>
      <td>${template.payment_details}</td>
      <td>Extended payment details like bank accounts, might be multiple lines</td>
    </tr>
    <tr>
      <td>${query.begin}</td>
      <td>The query begin as formatted short date</td>
    </tr>
    <tr>
      <td>${query.end}</td>
      <td>The query end as formatted short date</td>
    </tr>
    <tr>
      <td>${query.month}</td>
      <td>The month for this query (begin date) <strong>DEPRECATED</strong>
</td>
    </tr>
    <tr>
      <td>${query.month_number}</td>
      <td>The numerical value for the month (with leading zero) <strong>DEPRECATED</strong>
</td>
    </tr>
    <tr>
      <td>${query.day}</td>
      <td>The day for the queries begin as numerical value with leading zero <strong>DEPRECATED</strong>
</td>
    </tr>
    <tr>
      <td>${query.year}</td>
      <td>The year for this query (begin date) <strong>DEPRECATED</strong>
</td>
    </tr>
    <tr>
      <td>${query.begin_month}</td>
      <td>The month for the queries begin date</td>
    </tr>
    <tr>
      <td>${query.begin_month_number}</td>
      <td>The numerical value for the month of the queries begin date with leading zero</td>
    </tr>
    <tr>
      <td>${query.begin_day}</td>
      <td>The day for the queries begin as numerical value with leading zero</td>
    </tr>
    <tr>
      <td>${query.begin_year}</td>
      <td>The year for the queries begin date</td>
    </tr>
    <tr>
      <td>${query.end_month}</td>
      <td>The month for the queries end date</td>
    </tr>
    <tr>
      <td>${query.end_month_number}</td>
      <td>The numerical value for the month of the queries end date with leading zero</td>
    </tr>
    <tr>
      <td>${query.end_day}</td>
      <td>The day for the queries end as numerical value with leading zero</td>
    </tr>
    <tr>
      <td>${query.end_year}</td>
      <td>The year for the queries end date</td>
    </tr>
    <tr>
      <td>${user.name}</td>
      <td>The current users name</td>
    </tr>
    <tr>
      <td>${user.email}</td>
      <td>The current users email</td>
    </tr>
    <tr>
      <td>${user.alias}</td>
      <td>The current users alias</td>
    </tr>
    <tr>
      <td>${user.title}</td>
      <td>The current users title</td>
    </tr>
    <tr>
      <td>${user.meta.X}</td>
      <td>The current users <a href="/documentation/user-preferences.html">preference</a> named <code class="language-plaintext highlighter-rouge">X</code>
</td>
    </tr>
  </tbody>
</table>

<h3 id="timesheet-entry-variables">Timesheet entry variables</h3>

<p>For each timesheet entry you can use the variables from the following table.</p>

<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>${entry.row}</td>
      <td>An empty string, used as template row for docx</td>
      <td> </td>
    </tr>
    <tr>
      <td>${entry.description}</td>
      <td>The entries description</td>
      <td><em>foo bar</em></td>
    </tr>
    <tr>
      <td>${entry.amount}</td>
      <td>The format duration/amount for this entry</td>
      <td>02:47 h</td>
    </tr>
    <tr>
      <td>${entry.rate}</td>
      <td>The rate for one unit of the entry (normally one hour) with currency</td>
      <td>1.100,01 EUR</td>
    </tr>
    <tr>
      <td>${entry.rate_nc}</td>
      <td>The rate for one unit of the entry without currency</td>
      <td>1100,01</td>
    </tr>
    <tr>
      <td>${entry.rate_plain}</td>
      <td>The rate for one unit of the entry as unformatted value</td>
      <td>1100.01</td>
    </tr>
    <tr>
      <td>${entry.total}</td>
      <td>The total rate for this entry with currency</td>
      <td>1.278,33 EUR</td>
    </tr>
    <tr>
      <td>${entry.total_nc}</td>
      <td>The total rate for this entry without currency</td>
      <td>1.278,33</td>
    </tr>
    <tr>
      <td>${entry.total_plain}</td>
      <td>The total rate as unformatted value</td>
      <td>1278.33</td>
    </tr>
    <tr>
      <td>${entry.currency}</td>
      <td>The currency for this record as string (like EUR or USD)</td>
      <td>EUR</td>
    </tr>
    <tr>
      <td>${entry.duration}</td>
      <td>The duration in seconds</td>
      <td>10020</td>
    </tr>
    <tr>
      <td>${entry.duration_decimal}</td>
      <td>The duration in decimal format (with localized separator)</td>
      <td>2.78</td>
    </tr>
    <tr>
      <td>${entry.duration_minutes}</td>
      <td>The duration in minutes with no decimals</td>
      <td>167</td>
    </tr>
    <tr>
      <td>${entry.begin}</td>
      <td>The begin date (format depends on the users language)</td>
      <td>27.10.2018</td>
    </tr>
    <tr>
      <td>${entry.begin_time}</td>
      <td>The formatted time for the begin of this entry</td>
      <td>14:57</td>
    </tr>
    <tr>
      <td>${entry.begin_timestamp}</td>
      <td>The timestamp for the begin of this entry</td>
      <td>1542016273</td>
    </tr>
    <tr>
      <td>${entry.end}</td>
      <td>The begin date  (format depends on the users language)</td>
      <td>27.10.2018</td>
    </tr>
    <tr>
      <td>${entry.end_time}</td>
      <td>The formatted time for the end of this entry</td>
      <td>17:44</td>
    </tr>
    <tr>
      <td>${entry.end_timestamp}</td>
      <td>The timestamp for the end of this entry</td>
      <td>1542016273</td>
    </tr>
    <tr>
      <td>${entry.date}</td>
      <td>The start date when this record was created</td>
      <td>27.10.2018</td>
    </tr>
    <tr>
      <td>${entry.week}</td>
      <td>The start week number when this record was created</td>
      <td>39</td>
    </tr>
    <tr>
      <td>${entry.weekyear}</td>
      <td>The corresponding year to the week number</td>
      <td>2018</td>
    </tr>
    <tr>
      <td>${entry.user_id}</td>
      <td>The user ID</td>
      <td>1</td>
    </tr>
    <tr>
      <td>${entry.user_name}</td>
      <td>The username</td>
      <td>susan_super</td>
    </tr>
    <tr>
      <td>${entry.user_alias}</td>
      <td>The user alias</td>
      <td>Susan Miller</td>
    </tr>
    <tr>
      <td>${entry.activity}</td>
      <td>Activity name</td>
      <td>Post production</td>
    </tr>
    <tr>
      <td>${entry.activity_id}</td>
      <td>Activity ID</td>
      <td>124</td>
    </tr>
    <tr>
      <td>${entry.project}</td>
      <td>Project name</td>
      <td>Nemesis</td>
    </tr>
    <tr>
      <td>${entry.project_id}</td>
      <td>Project ID</td>
      <td>10</td>
    </tr>
    <tr>
      <td>${entry.customer}</td>
      <td>Customer name</td>
      <td>Acme Studios</td>
    </tr>
    <tr>
      <td>${entry.customer_id}</td>
      <td>Customer ID</td>
      <td>3</td>
    </tr>
    <tr>
      <td>${entry.meta.X}</td>
      <td>The <a href="/documentation/plugin-custom-fields.html">meta field</a> named <code class="language-plaintext highlighter-rouge">X</code> (if visible)</td>
      <td> </td>
    </tr>
    <tr>
      <td>${entry.type}</td>
      <td>The type of this entry (plugins can add custom types)</td>
      <td>timesheet</td>
    </tr>
    <tr>
      <td>${entry.category}</td>
      <td>The category of this entry (plugins can add custom types)</td>
      <td>work</td>
    </tr>
  </tbody>
</table>

<h3 id="customer-variables">Customer variables</h3>

<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>${customer.id}</td>
      <td>The customer ID</td>
    </tr>
    <tr>
      <td>${customer.comment}</td>
      <td>The description of this customer</td>
    </tr>
    <tr>
      <td>${customer.address}</td>
      <td>The customer address</td>
    </tr>
    <tr>
      <td>${customer.name}</td>
      <td>The customer name</td>
    </tr>
    <tr>
      <td>${customer.contact}</td>
      <td>The customer contact</td>
    </tr>
    <tr>
      <td>${customer.company}</td>
      <td>The customer company</td>
    </tr>
    <tr>
      <td>${customer.vat}</td>
      <td>The customer Vat ID</td>
    </tr>
    <tr>
      <td>${customer.number}</td>
      <td>The customer number</td>
    </tr>
    <tr>
      <td>${customer.country}</td>
      <td>The customer country</td>
    </tr>
    <tr>
      <td>${customer.homepage}</td>
      <td>The customer homepage</td>
    </tr>
    <tr>
      <td>${customer.phone}</td>
      <td>The customers phone number</td>
    </tr>
    <tr>
      <td>${customer.mobile}</td>
      <td>The customers mobile number</td>
    </tr>
    <tr>
      <td>${customer.email}</td>
      <td>The customers email address</td>
    </tr>
    <tr>
      <td>${customer.fax}</td>
      <td>The customers fax number</td>
    </tr>
    <tr>
      <td>${customer.meta.x}</td>
      <td>The customer <a href="/documentation/plugin-custom-fields.html">meta field</a> named <code class="language-plaintext highlighter-rouge">X</code>. The internal name <code class="language-plaintext highlighter-rouge">X</code> needs to be used in lowercase letters, eg. <code class="language-plaintext highlighter-rouge">FooBar</code> will be available as <code class="language-plaintext highlighter-rouge">${customer.meta.foobar}</code>. Only available if the field is visible.</td>
    </tr>
    <tr>
      <td>${customer.budget_open}</td>
      <td>The open monetary budget for this customer at the end date of your filter query (formatted with currency) (since 1.16.7)</td>
    </tr>
    <tr>
      <td>${customer.budget_open_plain}</td>
      <td>The open monetary budget for this customer at the end date of your filter query (plain float value) (since 1.16.7)</td>
    </tr>
    <tr>
      <td>${customer.time_budget_open}</td>
      <td>The open time budget for this customer at the end date of your filter query (formatted) (since 1.16.7)</td>
    </tr>
    <tr>
      <td>${customer.time_budget_open_plain}</td>
      <td>The open time budget for this customer at the end date of your filter query (integer value = seconds) (since 1.16.7)</td>
    </tr>
  </tbody>
</table>

<h3 id="project-variables">Project variables</h3>

<p>If a project was selected in the invoice filter (search form) the following variables exist as well:</p>

<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>${project.id}</td>
      <td>The project ID</td>
    </tr>
    <tr>
      <td>${project.name}</td>
      <td>The project name</td>
    </tr>
    <tr>
      <td>${project.comment}</td>
      <td>The description of this project</td>
    </tr>
    <tr>
      <td>${project.order_number}</td>
      <td>The project order number</td>
    </tr>
    <tr>
      <td>${project.start_date}</td>
      <td>Projects start date-time</td>
    </tr>
    <tr>
      <td>${project.end_date}</td>
      <td>Projects end date-time</td>
    </tr>
    <tr>
      <td>${project.order_date}</td>
      <td>Projects order date-time</td>
    </tr>
    <tr>
      <td>${project.budget_money}</td>
      <td>Projects budget including currency</td>
    </tr>
    <tr>
      <td>${project.budget_money_nc}</td>
      <td>The projects budget without currency</td>
    </tr>
    <tr>
      <td>${project.budget_money_plain}</td>
      <td>The projects budget as unformatted value</td>
    </tr>
    <tr>
      <td>${project.budget_time}</td>
      <td>The projects time-budget as seconds</td>
    </tr>
    <tr>
      <td>${project.budget_time_decimal}</td>
      <td>The projects time-budget in decimal format (with localized separator)</td>
    </tr>
    <tr>
      <td>${project.budget_time_minutes}</td>
      <td>The projects time-budget in minutes with no decimals</td>
    </tr>
    <tr>
      <td>${project.meta.x}</td>
      <td>The project <a href="/documentation/plugin-custom-fields.html">meta field</a> named <code class="language-plaintext highlighter-rouge">X</code>. The internal name <code class="language-plaintext highlighter-rouge">X</code> needs to be used in lowercase letters, eg. <code class="language-plaintext highlighter-rouge">FooBar</code> will be available as <code class="language-plaintext highlighter-rouge">${project.meta.foobar}</code>. Only available if the field is visible.</td>
    </tr>
    <tr>
      <td>${project.budget_open}</td>
      <td>The open monetary budget for this project at the end date of your filter query (formatted with currency) (since 1.16.7)</td>
    </tr>
    <tr>
      <td>${project.budget_open_plain}</td>
      <td>The open monetary budget for this project at the end date of your filter query (plain float value) (since 1.16.7)</td>
    </tr>
    <tr>
      <td>${project.time_budget_open}</td>
      <td>The open time budget for this project at the end date of your filter query (formatted) (since 1.16.7)</td>
    </tr>
    <tr>
      <td>${project.time_budget_open_plain}</td>
      <td>The open time budget for this project at the end date of your filter query (integer value = seconds) (since 1.16.7)</td>
    </tr>
  </tbody>
</table>

<p>If you selected more than one project in the search, you will have further variables (same list then above) called <code class="language-plaintext highlighter-rouge">${project.1.name}</code>, <code class="language-plaintext highlighter-rouge">${project.2.name}</code> and so on.
The order is not guaranteed, so it is not recommended relying on those variables.</p>

<h3 id="activity-variables">Activity variables</h3>

<p>If an activity was selected in the invoice filter (search form) the following variables exist as well:</p>

<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>${activity.id}</td>
      <td>The activity ID</td>
    </tr>
    <tr>
      <td>${activity.name}</td>
      <td>The activity name</td>
    </tr>
    <tr>
      <td>${activity.comment}</td>
      <td>The description of this activity</td>
    </tr>
    <tr>
      <td>${activity.meta.x}</td>
      <td>The activity <a href="/documentation/plugin-custom-fields.html">meta field</a> named <code class="language-plaintext highlighter-rouge">X</code>. The internal name <code class="language-plaintext highlighter-rouge">X</code> needs to be used in lowercase letters, eg. <code class="language-plaintext highlighter-rouge">FooBar</code> will be available as <code class="language-plaintext highlighter-rouge">${activity.meta.foobar}</code>. Only available if the field is visible.</td>
    </tr>
    <tr>
      <td>${activity.budget_open}</td>
      <td>The open monetary budget for this activity at the end date of your filter query (formatted with currency) (since 1.16.7)</td>
    </tr>
    <tr>
      <td>${activity.budget_open_plain}</td>
      <td>The open monetary budget for this activity at the end date of your filter query (plain float value) (since 1.16.7)</td>
    </tr>
    <tr>
      <td>${activity.time_budget_open}</td>
      <td>The open time budget for this activity at the end date of your filter query (formatted) (since 1.16.7)</td>
    </tr>
    <tr>
      <td>${activity.time_budget_open_plain}</td>
      <td>The open time budget for this activity at the end date of your filter query (integer value = seconds) (since 1.16.7)</td>
    </tr>
  </tbody>
</table>

<p>If you selected more than one activity in the search, you will have further variables (same list then above) called <code class="language-plaintext highlighter-rouge">${activity.1.name}</code>, <code class="language-plaintext highlighter-rouge">${activity.2.name}</code> and so on.
The order is not guaranteed, so it is not recommended relying on those variables.</p>

<h3 id="uploading-invoice-documents">Uploading invoice documents</h3>

<p>You can upload invoice documents via the UI at <code class="language-plaintext highlighter-rouge">/en/invoice/document_upload</code>.</p>

<p>Due to security restriction currently only the upload of the following formats is allowed: <code class="language-plaintext highlighter-rouge">DOCX</code>, <code class="language-plaintext highlighter-rouge">ODS</code>, <code class="language-plaintext highlighter-rouge">XLSX</code>.</p>

<p>There is a known bug in LibreOffice which exports DOCX files with a wrong mime-type. These files will not be accepted
by Kimai with the error <code class="language-plaintext highlighter-rouge">This file type is not allowed</code> (<a href="https://github.com/kimai/kimai/issues/1916">read this issue</a> for more information).
The workaround is to change the document with another word processor: Apple pages, Google Drive and Microsoft 365 Online Office will export the DOCX files with the correct mimetype.</p>

<h2 id="create-invoices-with-cronjobs">Create invoices with cronjobs</h2>

<p>Kimai comes with a new command, which allows you to create invoices from the command line.
When combined with a cronjob, you can automate your invoice creation.</p>

<p>Find all available options with the <code class="language-plaintext highlighter-rouge">--help</code> parameter:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/console kimai:invoice:create <span class="nt">--help</span> 
</code></pre></div></div>

<p>This command will create one invoice for every customer which had timesheets in this month.
The invoice template that will be used is fetched from the customer meta-field <code class="language-plaintext highlighter-rouge">inv_tpl</code> (can be an ID or a template name):</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/console kimai:invoice:create <span class="nt">--user</span><span class="o">=</span>susan_super <span class="nt">--timezone</span><span class="o">=</span>Europe/Berlin <span class="nt">--by-customer</span> <span class="nt">--template-meta</span><span class="o">=</span>inv_tpl 
</code></pre></div></div>

<p>This command will create one invoice for every project which had timesheets in January 2020.
The invoice template that will be used for every invoice is <code class="language-plaintext highlighter-rouge">Freelancer (PDF)</code>:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/console kimai:invoice:create <span class="nt">--user</span><span class="o">=</span>susan_super <span class="nt">--timezone</span><span class="o">=</span>UTC <span class="nt">--by-project</span> <span class="nt">--template</span><span class="o">=</span><span class="s2">"Freelancer (PDF)"</span> <span class="nt">--start</span><span class="o">=</span>2020-01-02 <span class="nt">--end</span><span class="o">=</span>2020-01-31
</code></pre></div></div>



                </div>
                

                
                <h2 id="related-articles" class="fs-4 mt-5">Related articles</h2>
                <ul>
                    
                    
                    <li>
                        <a href="/documentation/plugin-invoice.html">Invoice</a> – Enhanced invoice features
                    </li>
                    
                </ul>
                
            </div>
        </div>

    </div>
</main>


    <aside class="side-nav side-nav-end d-none d-xxl-block position-fixed top-0 end-0 vh-100 py-5" style="width: 20rem;">
        <h3 class="fs-lg mt-5 pt-5">Jump to</h3>
        <ul class="nav" id="jumpToNav">
<li class="nav-item">
<a href="#invoice-number-format" class="nav-link">Invoice number format</a><ul>
<li class="nav-item"><a href="#incrementing-the-invoice-counter" class="nav-link">Incrementing the invoice counter</a></li>
<li class="nav-item"><a href="#decrementing-the-invoice-counter" class="nav-link">Decrementing the invoice counter</a></li>
<li class="nav-item"><a href="#examples" class="nav-link">Examples</a></li>
</ul>
</li>
<li class="nav-item">
<a href="#invoice-state" class="nav-link">Invoice state</a><ul><li class="nav-item"><a href="#deleting-invoices" class="nav-link">Deleting invoices</a></li></ul>
</li>
<li class="nav-item"><a href="#export-state" class="nav-link">Export state</a></li>
<li class="nav-item"><a href="#billable-items-only" class="nav-link">Billable items only</a></li>
<li class="nav-item">
<a href="#invoice-document" class="nav-link">Invoice document</a><ul>
<li class="nav-item"><a href="#create-your-own-invoice-document" class="nav-link">Create your own invoice document</a></li>
<li class="nav-item"><a href="#twig-templates" class="nav-link">Twig templates</a></li>
<li class="nav-item"><a href="#pdf-templates" class="nav-link">PDF templates</a></li>
<li class="nav-item"><a href="#docx-templates" class="nav-link">Docx templates</a></li>
<li class="nav-item"><a href="#spreadsheets-ods-xlsx-and-csv" class="nav-link">Spreadsheets (ODS, XLSX and CSV)</a></li>
</ul>
</li>
<li class="nav-item">
<a href="#template-variables" class="nav-link">Template variables</a><ul>
<li class="nav-item"><a href="#global-variables" class="nav-link">Global variables</a></li>
<li class="nav-item"><a href="#timesheet-entry-variables" class="nav-link">Timesheet entry variables</a></li>
<li class="nav-item"><a href="#customer-variables" class="nav-link">Customer variables</a></li>
<li class="nav-item"><a href="#project-variables" class="nav-link">Project variables</a></li>
<li class="nav-item"><a href="#activity-variables" class="nav-link">Activity variables</a></li>
<li class="nav-item"><a href="#uploading-invoice-documents" class="nav-link">Uploading invoice documents</a></li>
</ul>
</li>
<li class="nav-item"><a href="#create-invoices-with-cronjobs" class="nav-link">Create invoices with cronjobs</a></li>
</ul>
        
        <ul class="nav">
            <li>
                <a href="#related-articles" class="nav-link">Related articles</a>
            </li>
        </ul>
        
    </aside>



<a href="#top" class="btn-scroll-top" data-scroll>
    <span class="btn-scroll-top-tooltip text-muted fs-sm me-2">Top</span>
    <i class="btn-scroll-top-icon bx bx-chevron-up"></i>
</a>

<script src="/assets/build/main.js?v1"></script>

<script async defer src="https://sa.kimai.org/latest.js"></script>
<noscript><img src="https://sa.kimai.org/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade"></noscript>

</body>
</html>
